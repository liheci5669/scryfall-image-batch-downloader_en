import{_ as re,U as K,V as m,f as se,M as X,n as E,h as u,a8 as de,r as ce,a1 as ge,a2 as y,ae as pe,af as me,v as fe,X as M,o as t,K as h,w as I,a as C,E as i,b,$ as G,c as d,Z as A,L as p,T as be,F as ve,D as ye,a9 as Me,t as R,d as P,a0 as he}from"./DP6iaQAV.js";import{_ as Z}from"./BXg2tJWZ.js";import{l as Ie,n as Ce,u as Ae,r as Se,i as Oe}from"./CheHSt7w.js";import{s as ke}from"./2ONkXXNl.js";import{d as ze}from"./BRdj8e4I.js";import{i as Be,a as qe,u as J}from"./OUNLjZMp.js";import{u as we}from"./CCwUi3Zl.js";import{u as Ve}from"./DQT_VdUS.js";import{a as He}from"./rgl6QvXy.js";import"./YDFocFGA.js";import"./B08LnwSc.js";import"./CxIZtCgj.js";import"./DKg9Wr12.js";import"./jt7KQrlF.js";import"./Bxl6BmcB.js";import"./DyPWvihU.js";import"./CUMWnrib.js";import"./CXS4LCgH.js";const s=K(m.ui.strategy,m.ui.input,Be),W=K(m.ui.strategy,m.ui.inputMenu,qe),Ne=se({components:{HCombobox:Ie,HComboboxButton:Ce,HComboboxOptions:Ae,HComboboxOption:Se,HComboboxInput:Oe,UIcon:X,UAvatar:Z},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>s.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>W.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>W.default.selectedIcon},disabled:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(s.size).includes(e)}},color:{type:String,default:()=>s.default.color,validator(e){return[...m.ui.colors,...Object.keys(s.color)].includes(e)}},variant:{type:String,default:()=>s.default.variant,validator(e){return[...Object.keys(s.variant),...Object.values(s.color).flatMap(r=>Object.keys(r))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},searchLazy:{type:Boolean,default:!1},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:r,slots:q}){const{ui:a,attrs:D}=J("input",E(e,"ui"),s,E(e,"class")),{ui:w}=J("inputMenu",E(e,"uiMenu"),W),S=u(()=>de({},e.popper,w.value.popper)),[f,O]=we(S.value),{size:V,rounded:H}=He({ui:a,props:e}),{emitFormBlur:N,emitFormChange:$,inputId:j,color:n,size:U,name:v}=Ve(e,s),o=u(()=>V.value??U.value),k=ce(""),c=u({get(){return e.query??k.value},set(l){k.value=l,r("update:query",l)}}),Y=u(()=>{if(e.modelValue)if(e.valueAttribute){const l=L.value.find(g=>g[e.valueAttribute]===e.modelValue);return l?l[e.optionAttribute]:null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute]}),_=u(()=>{var g,B;const l=((B=(g=a.value.color)==null?void 0:g[n.value])==null?void 0:B[e.variant])||a.value.variant[e.variant];return ge(y(a.value.base,a.value.form,H.value,a.value.placeholder,a.value.size[o.value],e.padded?a.value.padding[o.value]:"p-0",l==null?void 0:l.replaceAll("{color}",n.value),(z.value||q.leading)&&a.value.leading.padding[o.value],(Q.value||q.trailing)&&a.value.trailing.padding[o.value]),e.inputClass)}),z=u(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),Q=u(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),x=u(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),ee=u(()=>e.loading&&!z.value?e.loadingIcon:e.trailingIcon||e.icon),ae=u(()=>y(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[o.value])),ne=u(()=>y(a.value.icon.base,n.value&&m.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[o.value],e.loading&&a.value.icon.loading)),le=u(()=>y(a.value.icon.trailing.wrapper,a.value.icon.trailing.padding[o.value])),ie=u(()=>y(a.value.icon.base,n.value&&m.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[o.value],e.loading&&!z.value&&a.value.icon.loading)),F=e.search&&typeof e.search=="function"?pe(e.search,e.debounce):void 0,L=ze(async()=>F?await F(c.value):e.options||[],[],{lazy:e.searchLazy}),ue=u(()=>!c.value||F?L.value:L.value.filter(l=>{var g;return((g=e.searchAttributes)!=null&&g.length?e.searchAttributes:[e.optionAttribute]).some(B=>{if(["string","number"].includes(typeof l))return String(l).search(new RegExp(c.value,"i"))!==-1;const T=me(l,B);return T!=null&&String(T).search(new RegExp(c.value,"i"))!==-1})}));fe(O,l=>{l?r("open"):(r("close"),N())});function te(l){c.value="",r("update:modelValue",l),r("change",l),$()}function oe(l){c.value=l.target.value}return ke(()=>he()),{ui:a,uiMenu:w,attrs:D,name:v,inputId:j,popper:S,trigger:f,container:O,label:Y,isLeading:z,isTrailing:Q,inputClass:_,leadingIconName:x,leadingIconClass:ne,leadingWrapperIconClass:ae,trailingIconName:ee,trailingIconClass:ie,trailingWrapperIconClass:le,filteredOptions:ue,query:c,onUpdate:te,onQueryChange:oe}}}),$e={class:"truncate"};function je(e,r,q,a,D,w){const S=M("HComboboxInput"),f=X,O=M("HComboboxButton"),V=Z,H=M("HComboboxOption"),N=M("HComboboxOptions"),$=M("HCombobox");return t(),h($,{by:e.by,name:e.name,"model-value":e.modelValue,disabled:e.disabled,nullable:e.nullable,as:"div",class:i(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:I(({open:j})=>[C("div",{class:i(e.uiMenu.trigger)},[b(S,G({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:e.label,onChange:e.onQueryChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),e.isLeading&&e.leadingIconName||e.$slots.leading?(t(),d("span",{key:0,class:i(e.leadingWrapperIconClass)},[A(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[b(f,{name:e.leadingIconName,class:i(e.leadingIconClass)},null,8,["name","class"])])],2)):p("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(t(),h(O,{key:1,ref:"trigger",class:i(e.trailingWrapperIconClass)},{default:I(()=>[A(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[b(f,{name:e.trailingIconName,class:i(e.trailingIconClass)},null,8,["name","class"])])]),_:3},8,["class"])):p("",!0)],2),j?(t(),d("div",{key:0,ref:"container",class:i([e.uiMenu.container,e.uiMenu.width])},[b(be,G({appear:""},e.uiMenu.transition),{default:I(()=>[C("div",null,[e.popper.arrow?(t(),d("div",{key:0,"data-popper-arrow":"",class:i(Object.values(e.uiMenu.arrow))},null,2)):p("",!0),b(N,{static:"",class:i([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:I(()=>[(t(!0),d(ve,null,ye(e.filteredOptions,(n,U)=>(t(),h(H,{key:U,as:"template",value:e.valueAttribute?n[e.valueAttribute]:n,disabled:n.disabled},{default:I(({active:v,selected:o,disabled:k})=>[C("li",{class:i([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,v?e.uiMenu.option.active:e.uiMenu.option.inactive,o&&e.uiMenu.option.selected,k&&e.uiMenu.option.disabled])},[C("div",{class:i(e.uiMenu.option.container)},[A(e.$slots,"option",{option:n,active:v,selected:o},()=>[n.icon?(t(),h(f,{key:0,name:n.icon,class:i([e.uiMenu.option.icon.base,v?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,n.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):n.avatar?(t(),h(V,G({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...n.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):n.chip?(t(),d("span",{key:2,class:i(e.uiMenu.option.chip.base),style:Me({background:`#${n.chip}`})},null,6)):p("",!0),C("span",$e,R(["string","number"].includes(typeof n)?n:n[e.optionAttribute]),1)])],2),o?(t(),d("span",{key:0,class:i([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[b(f,{name:e.selectedIcon,class:i(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):p("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(t(),d("p",{key:0,class:i(e.uiMenu.option.empty)},[A(e.$slots,"option-empty",{query:e.query},()=>[P(' No results for "'+R(e.query)+'". ',1)])],2)):e.filteredOptions.length?p("",!0):(t(),d("p",{key:1,class:i(e.uiMenu.empty)},[A(e.$slots,"empty",{query:e.query},()=>[r[0]||(r[0]=P(" No options. "))])],2))]),_:3},8,["class"])])]),_:3},16)],2)):p("",!0)]),_:3},8,["by","name","model-value","disabled","nullable","class","onUpdate:modelValue"])}const ea=re(Ne,[["render",je]]);export{ea as default};
